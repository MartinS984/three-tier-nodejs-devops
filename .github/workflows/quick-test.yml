name: Quick Test

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]
  workflow_dispatch:  # Allows manual trigger from GitHub UI

jobs:
  quick-test:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: Show project info
      run: |
        echo "ğŸ‰ Quick Test Workflow Started"
        echo "ğŸ“… Date: $(date)"
        echo "ğŸ“ Repository: ${{ github.repository }}"
        echo "ğŸ‘¤ Triggered by: ${{ github.actor }}"
        echo "ğŸŒ¿ Branch: ${{ github.ref_name }}"
        echo ""
        echo "ğŸ“Š Project Structure:"
        echo "====================="
        find . -maxdepth 2 -type f -name "*.json" -o -name "*.js" -o -name "Dockerfile" | sort
        echo ""
        echo "âœ… This workflow proves GitHub Actions is working!"
    
    - name: Validate Dockerfiles
      run: |
        echo "ğŸ” Checking Dockerfiles..."
        if [ -f "src/backend/Dockerfile" ]; then
          echo "âœ… Backend Dockerfile exists"
        else
          echo "âš ï¸  Backend Dockerfile not found"
        fi
        
        if [ -f "src/frontend/Dockerfile" ]; then
          echo "âœ… Frontend Dockerfile exists"
        else
          echo "âš ï¸  Frontend Dockerfile not found"
        fi
        
        if [ -f "docker-compose.working.yml" ]; then
          echo "âœ… Docker Compose file exists"
        else
          echo "âš ï¸  Docker Compose file not found"
        fi
    
    - name: Success
      run: |
        echo ""
        echo "ğŸŠ ğŸŠ ğŸŠ SUCCESS! ğŸŠ ğŸŠ ğŸŠ"
        echo ""
        echo "âœ… GitHub Actions is properly configured!"
        echo "âœ… Your three-tier DevOps project is CI/CD ready!"
        echo "âœ… This workflow ran without any secrets or complex setup"
        echo ""
        echo "Next steps:"
        echo "1. Add JWT and MongoDB secrets for full deployment"
        echo "2. Configure tests for automated testing"
        echo "3. Set up environment deployments"
        echo ""
        echo "ğŸŒ View your workflows:"
        echo "   https://github.com/${{ github.repository }}/actions"
